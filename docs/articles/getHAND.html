<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pulling HAND Tiles from AWS • Flood Mapping</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Pulling HAND Tiles from AWS">
<meta property="og:description" content="FloodMapping">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Flood Mapping</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Documentation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/index.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/getData.html">Getting Static Data</a>
    </li>
    <li>
      <a href="../articles/getHAND.html">Pulling HAND Tiles from AWS</a>
    </li>
    <li>
      <a href="../articles/generateSRC.html">Generating Synthetic Rating Curves</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fas fa-file-code"></span>
     
    Functions
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mikejohnson51/FloodMapping/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="getHAND_files/header-attrs-2.6.6/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Pulling HAND Tiles from AWS</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mikejohnson51/FloodMapping/blob/master/vignettes/getHAND.Rmd"><code>vignettes/getHAND.Rmd</code></a></small>
      <div class="hidden name"><code>getHAND.Rmd</code></div>

    </div>

    
    
<div id="context" class="section level2">
<h2 class="hasAnchor">
<a href="#context" class="anchor"></a>Context</h2>
<p>The development of the HAND datasets has provided extraordinary support in the use of flood mapping. However, the current HAND rasters can vary in storage size, and be upwards of 20 GBs or more! To mitigate the need for large storage and increasing computation speed, we have generated a set of GeoTIFF format HAND tiles, stored in an <a href="https://s3-tilemap.s3.amazonaws.com">AWS S3 bucket</a>.</p>
<div class="figure" style="text-align: center">
<img src="imgs/hand_tiles_overview.png" alt="**Figure 1:** HAND Tiles Coverage" width="400px"><p class="caption">
<strong>Figure 1:</strong> HAND Tiles Coverage
</p>
</div>
<blockquote>
<p>Currently, <strong>as of 3/9/2021</strong>, the HAND tiles only cover the HUC6 regions overlapping Alabama.</p>
</blockquote>
</div>
<div id="getting-hand-tiles" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-hand-tiles" class="anchor"></a>Getting HAND Tiles</h2>
<p>Lets start with defining an area of interest (AOI). We’ll use the <a href="https://en.wikipedia.org/wiki/Mobile_River">Mobile River</a> as our AOI:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mobile_river</span> <span class="op">&lt;-</span> <span class="fu">AOI</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/AOI/man/aoi_get.html">aoi_get</a></span><span class="op">(</span><span class="st">"Mobile River"</span><span class="op">)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="imgs/mobile_river.png" alt="**Figure 2:** Mobile River" width="200px"><p class="caption">
<strong>Figure 2:</strong> Mobile River
</p>
</div>
<p>Given this AOI, we can now easily grab the HAND tiles from the AWS S3 bucket:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mobile_rv_hand</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_hand_raster.html">get_hand_raster</a></span><span class="op">(</span><span class="va">mobile_river</span><span class="op">)</span></code></pre></div>
<p>We get the following HAND raster after calling this function:</p>
<div class="figure" style="text-align: center">
<img src="imgs/hand_zoom.png" alt="**Figure 3:** Zoomed in HAND Raster. The orange feature represents our AOI." width="500px"><p class="caption">
<strong>Figure 3:</strong> Zoomed in HAND Raster. The orange feature represents our AOI.
</p>
</div>
<p>Now, we can work with this HAND in mapping floods as opposed to downloading the HAND rasters covering entire HUC2 regions.</p>
</div>
<div id="benchmarking" class="section level2">
<h2 class="hasAnchor">
<a href="#benchmarking" class="anchor"></a>Benchmarking</h2>
<p>Given a 100 Mbit/s connection, the benchmark (evaluated 5 times) for <code><a href="../reference/get_hand_raster.html">get_hand_raster()</a></code> for this AOI is as follows:</p>
<pre><code>Unit: seconds
                         expr       min        lq      mean    median        uq       max  neval
get_hand_raster(mobile_river)  11.56501  11.78434  11.84891  11.86188  11.93124  12.10206      5</code></pre>
<p>This gives that, for the <strong>115</strong> tiles for this AOI, it took approximately <strong>103.034 ms per tile</strong> to download, and a total time of <strong>11848.91 ms</strong>.</p>
<p>The corresponding HUC6 (<em>031602</em>) HAND dataset is <strong>8.3 GB</strong> (from the <a href="https://cfim.ornl.gov/data/">CFIM Repository</a>), which would take an estimated <strong>712000 ms</strong> to download.</p>
<p>For a more fair comparison, consider if we downloaded <em>only</em> the HAND raster directly from the <a href="http://web.corral.tacc.utexas.edu/nfiedata/HAND/">University of Texas at Austin’s</a> HAND repository. This download is <strong>749.9 MB</strong>, which would take an estimated <strong>62000 ms</strong> to download. To summarize:</p>
<table class="table">
<thead><tr class="header">
<th align="left">Repository</th>
<th align="left">Time Taken / Estimated Time</th>
<th align="left">Relative to S3</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">S3 HAND Tiles</td>
<td align="left"><strong>~12000 ms</strong></td>
<td align="left">N/A</td>
</tr>
<tr class="even">
<td align="left">CFIM Repository</td>
<td align="left"><strong>~712000 ms</strong></td>
<td align="left"><em>~59.3x</em></td>
</tr>
<tr class="odd">
<td align="left">UT Austin Repository</td>
<td align="left"><strong>~62000 ms</strong></td>
<td align="left"><em>~5.2x</em></td>
</tr>
</tbody>
</table>
<p>Clearly, we can see the benefit of tiling in the case of working with county-level AOIs. In the case of larger AOIs, it would potentially be better to download the HAND rasters directly from either repository.</p>
<p><em>Note: the UT Austin repository is an outdated version of the HAND rasters. The latest version can be found on the CFIM repository web page.</em></p>
<p><em>Estimated download times are retrieved from <a href="https://www.download-time.com/">here</a></em></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Mike Johnson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
