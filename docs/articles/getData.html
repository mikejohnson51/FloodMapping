<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Static Data • Flood Mapping</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting Static Data">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Flood Mapping</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa fas fa-book"></span>
     
    Documentation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/index.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/getData.html">Getting Static Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    functions
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><script src="getData_files/htmlwidgets-1.2/htmlwidgets.js"></script><script src="getData_files/jquery-1.12.4/jquery.min.js"></script><link href="getData_files/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="getData_files/leaflet-1.3.1/leaflet.js"></script><link href="getData_files/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="getData_files/Proj4Leaflet-1.0.1/proj4-compressed.js"></script><script src="getData_files/Proj4Leaflet-1.0.1/proj4leaflet.js"></script><link href="getData_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="getData_files/leaflet-binding-2.0.2/leaflet.js"></script><script src="getData_files/leaflet-providers-1.1.17/leaflet-providers.js"></script><script src="getData_files/leaflet-providers-plugin-2.0.2/leaflet-providers-plugin.js"></script><link href="getData_files/leaflet-minimap-3.3.1/Control.MiniMap.min.css" rel="stylesheet">
<script src="getData_files/leaflet-minimap-3.3.1/Control.MiniMap.min.js"></script><script src="getData_files/leaflet-minimap-3.3.1/Minimap-binding.js"></script><link href="getData_files/leaflet-measure-2.1.7/leaflet-measure.css" rel="stylesheet">
<script src="getData_files/leaflet-measure-2.1.7/leaflet-measure.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Getting Static Data</h1>
            
      
      
      <div class="hidden name"><code>getData.Rmd</code></div>

    </div>

    
    
<div id="defining-and-area-of-interest" class="section level2">
<h2 class="hasAnchor">
<a href="#defining-and-area-of-interest" class="anchor"></a>Defining and Area of Interest</h2>
<p>To reduce the size of the data needed,LivingFlood has been designed to compliment the AOI package. AOI allows users to define an area of interest by a location and/or boundng box dimisions to yeild a spatial geometry. A detailed look at this process can be found <a href="...">here</a>. For this example we are interested in the 100 square mile regions surrounding Boulder, Colorado.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">AOI =<span class="st"> </span><span class="kw">getAOI</span>(<span class="kw">list</span>(<span class="st">"Boulder"</span>, <span class="dv">10</span>, <span class="dv">10</span>))</code></pre></div>
<p>To make sure that our AOI is defined as we hoped we can use the AOI::check() fucntion:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">check</span>(AOI)</code></pre></div>
<div id="htmlwidget-d1aba8cf14760e032bd8" style="width:576px;height:432.632880098888px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-d1aba8cf14760e032bd8">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Esri.NatGeoWorldMap",null,"Terrain",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["CartoDB.Positron",null,"Grayscale",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addProviderTiles","args":["Esri.WorldImagery",null,"Imagery",{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addScaleBar","args":[{"maxWidth":100,"metric":true,"imperial":true,"updateWhenIdle":true,"position":"bottomleft"}]},{"method":"addMiniMap","args":[null,null,"bottomright",150,150,19,19,-5,false,false,false,true,false,true,{"color":"#ff7800","weight":1,"clickable":false},{"color":"#000000","weight":1,"clickable":false,"opacity":0,"fillOpacity":0},{"hideText":"Hide MiniMap","showText":"Show MiniMap"},[]]},{"method":"addMeasure","args":[{"position":"bottomleft","primaryLengthUnit":"feet","primaryAreaUnit":"sqmiles","activeColor":"red","completedColor":"green","popupOptions":{"className":"leaflet-measure-resultpopup","autoPanPadding":[10,10]},"captureZIndex":10000,"localization":"en","decPoint":".","thousandsSep":","}]},{"method":"addLayersControl","args":[["Terrain","Grayscale","Imagery"],[],{"collapsed":true,"autoZIndex":true,"position":"topright"}]},{"method":"addPolygons","args":[[[[{"lng":[-105.365161099126,-105.365161099126,-105.175930100874,-105.175930100874,-105.365161099126],"lat":[39.9425218318841,40.0874493681159,40.0874493681159,39.9425218318841,39.9425218318841]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"red","weight":5,"opacity":1,"fill":true,"fillColor":"transparent","fillOpacity":0.2,"smoothFactor":1,"noClip":false},null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[39.9425218318841,40.0874493681159],"lng":[-105.365161099126,-105.175930100874]}},"evals":[],"jsHooks":[]}</script><p>All looks good! We will use this AOI for the rest of the examples</p>
</div>
<div id="get-raw-data" class="section level2">
<h2 class="hasAnchor">
<a href="#get-raw-data" class="anchor"></a>Get RAW data</h2>
<p>With a defined AOI now need to grab the needed HAND data. Specifically we need three prodcts.</p>
<ol style="list-style-type: decimal">
<li>The HAND raster itself</li>
<li>The NHD catchemnt raster</li>
<li>The synthetic rating curve file for each NHD reach</li>
</ol>
<p>All of these will be collected and processed using the <code>getData</code> function. Depending on your internet connection this process can take a while as some rasters are over a GB in size. Fortunatly, if you are set up in a RStudio Project this step will only have to e carried out once.</p>
<p>The required input is an AOI geometry. Optionally, a name can be provided for the region, this name will be used to archive the processed data in your main working directory. If left NULL the name “RegionXXX” will be used starting at ‘Region001’ and increasing by one for each new AOI processed.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data =<span class="st"> </span><span class="kw"><a href="../reference/getData.html">getData</a></span>(AOI, <span class="dt">name =</span> <span class="st">"BoulderStudy"</span>)</code></pre></div>
<p><img src="imgs/download.png" width="600px"></p>
<p>As previously mentioned the convince of this porgram and sticking to the RProj folder is that if you try to download the same file again, the raw directory is checked first and only the needed files are downloaded.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data =<span class="st"> </span><span class="kw"><a href="../reference/getData.html">getData</a></span>(AOI, <span class="dt">name =</span> <span class="st">"BoulderStudy"</span>)</code></pre></div>
<p><img src="imgs/redo.png" width="600px"></p>
</div>
<div id="folder-structure" class="section level2">
<h2 class="hasAnchor">
<a href="#folder-structure" class="anchor"></a>Folder Structure</h2>
<p>Once downloaded you should check the RProj folder. In it you will find a top level directory called <code>LIVINGFLOOD</code>. In it you will find three subdirectories/files.</p>
<ol style="list-style-type: decimal">
<li>The RAW folder which holds the complete dataset downloaded from the HAND repository</li>
<li>A folder named after the AOI (either a supplied name or ‘RegionXXX’)</li>
<li>A meta.data csv outlining the regions that have been processed.</li>
</ol>
<p><img src="imgs/top.png" width="600px"></p>
<div id="metadata-csv" class="section level3">
<h3 class="hasAnchor">
<a href="#metadata-csv" class="anchor"></a>Metadata CSV</h3>
<p>The csv is a dynamic file that updates according to the contents of the LIVINGFLOOD directory. Looking at this file we’ll see the name of the region processed, the center latitute and longitude corrdinates; the height and width in miles of the geometry, the associated HUC unit, and the number of unique NHD reaches. Not only is this file useful for reference and for reporducing AOI calls, but it is used to avoid ducplicating downlaods. Before any downlaod occurs the getData script referecnes this file and stops if the data has already been processed. Even if you change the name the program will recongnize the geometry and stop the program while renmaing the folder to match the new name.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">read.csv</span>(<span class="st">"./LIVINGFLOOD/meta_data.csv"</span>)</code></pre></div>
<pre><code>#&gt;           name  latCent   lngCent height width origin   HUC6 nhd_num
#&gt; 1 BoulderStudy 40.01499 -105.2705     10    10 center 101900      95</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data =<span class="st"> </span><span class="kw"><a href="../reference/getData.html">getData</a></span>(AOI, <span class="dt">name =</span> <span class="st">"Boulder100mile2"</span>)
<span class="kw">read.csv</span>(<span class="st">"./LIVINGFLOOD/meta_data.csv"</span>)</code></pre></div>
<pre><code>#&gt;              name  latCent   lngCent height width origin   HUC6 nhd_num
#&gt; 1 Boulder100mile2 40.01499 -105.2705     10    10 center 101900      95</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data =<span class="st"> </span><span class="kw">getAOI</span>(<span class="st">'Denver'</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw"><a href="../reference/getData.html">getData</a></span>(<span class="dt">name =</span> <span class="st">"denver"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">read.csv</span>(<span class="st">"./LIVINGFLOOD/meta_data.csv"</span>)
<span class="co">#&gt;              name  latCent   lngCent height width origin   HUC6 nhd_num</span>
<span class="co">#&gt; 1 Boulder100mile2 40.01499 -105.2705     10    10 center 101900      95</span>
<span class="co">#&gt; 2          denver 39.76434 -104.8551     21    27 center 101900     284</span></code></pre></div>
</div>
<div id="raw-data" class="section level3">
<h3 class="hasAnchor">
<a href="#raw-data" class="anchor"></a>RAW Data</h3>
<p>Looking more closly at the RAW folder we find three sub folders each with HAND, CATCHMASK, or RATING-CURVE raw data for all regions that have been requested in the past. These are stored here so that any new region within a HUC6 that has already been procesedded can be quickly processed:</p>
<p><img src="imgs/raw.png" width="600px"></p>
</div>
<div id="processed-data" class="section level3">
<h3 class="hasAnchor">
<a href="#processed-data" class="anchor"></a>Processed Data</h3>
<p><img src="imgs/region.png" width="600px"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#defining-and-area-of-interest">Defining and Area of Interest</a></li>
      <li><a href="#get-raw-data">Get RAW data</a></li>
      <li><a href="#folder-structure">Folder Structure</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Mike Johnson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
